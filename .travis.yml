sudo: required
dist: trusty
before_install:
  - sudo apt-get -qq update && sudo apt-get install -y --no-install-recommends texlive-fonts-recommended
    texlive-latex-extra texlive-fonts-extra dvipng texlive-latex-recommended texlive-bibtex-extra
  - curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -
  - sudo apt-get install -y nodejs
  - sudo apt install openjdk-8-jdk
script:
  - cd thesis
  - pdflatex -interaction=nonstopmode -halt-on-error thesis.tex
  - bibtex thesis || true
  - pdflatex -interaction=nonstopmode -halt-on-error thesis.tex
  - pdflatex -interaction=nonstopmode -halt-on-error thesis.tex
  - cd ../ui
  - npm i && npm run release
  - cd ..
notifications:
  email:
    on_success: never
deploy:
  - provider: releases
    api_key:
      secure: q35rnX2Oh9suzzBTo45TE7xuRKml5PRTCsCn+mF+i6tgOPL/kW85gs1PsHatCni2DDTD+mAzgIDAlgK3kl3EOZ5CfByekyQNLTagF3MD4lBV1uMVvuaA0A6Q0WQi+VTvpVXoSXw/hsw4VdQpX8wqgPx40tm10dm7VkNPshlkA0S3D3AIJruSjmqs1pyJWlORXCGgGU1bLULTa2/NhF0G/AGlITWAufV6NWcGHjbRQ8jNY5nyK5FkTm5mihs8KxPpylVnCMX4H5E0XPOYWrLZyn3kywGP7NSfxQjQ2OswdTsG3gMmX5hIfncsqKOke+Wdzw5eHPPIs6tmt487b2m91n7FtXTwRpslVxaSer5JowqXHYZ90TZYMxLwKxtq2fVP3fb9mDvoBh+S44AyxpGRgAprL4SiEHkqaC7Y0g/1uOCa2UZUZ6DYqKeu0bosOugkwqEkfo24tcO6JyoiW/iOQJAznH0ILwnM4mec840pzMetFh2dW0OG55uQmmRGJVHgA+wCZ/Py7z0JBDELNKx6gZPoMC1IgIUs7Sc5qN3coi15lH8RqPwpcLFAGgTExaJnxk5Ji3S/uDTWeVtp8S9jKGPn6JEGi4yukPs/9ol5K/92QRo2KZ88lf/dqjrU0GeF9RRvxt/fLJWJo5kcT7mUkXu9QyLmg8qdghnR7gG49E0=
    file: thesis/thesis.pdf
    skip_cleanup: true
    on:
      repo: jerben/linked-data-driven-ui
  - provider: s3
    access_key_id: AKIAJHC7NGJXXSVIHW4A
    secret_access_key:
      secure: fDY+qsasC8FUf/kC96t3mJ7XgE7yC1lJxdEs9XDhh61McgzsmCU6F/FY/o0EfNSmBP/Hu4/htUIAG4hgEHQmMWrCL8YBYDepwSvjRq9lbmVV0WuEKowmToYLdF2UF26uPigsiyC3uKbuic9MC8x5amhHwUFc9XLxoSsavS6MpVibQlT6xyTvaPXrX5UZlBlN2IMvDrGNfUhSQm266Hy8Izxqc13K+1grq1GkuEbvknYUffSt8s/4lLGV1dNAqOe9yCz2gv4Ju2VDiW5Ffnq6bPL5DFFjv+H8Aj3ipWVpGtQLTIoRFHZg7AGEKf/IfOv2d8L1qa/XiaBmNOPEz2maJbpXLXbozu53xAvKX6S2wHWPl9njnVtNJut890qjtA/qQAN3f7C8Igj81hnTOUZwspclbACq5thtUYR8E5omBY/of5PXnIjZ3H+06VexHKco4E9AoERr7Bo9NRYYG7+9kgM/kLfokbHIV3MswSp/b/dYb5byDpDLVLJYsxa3anavIkc0Sw+MdgeGjs0fT/fm2z+r6Sv3tGq4cQZmUGvtzIGXptdGKPenUfwThgqrTX45w/Z2sxY0ODYVda/q7/AOOYpm0zeMwpmYBGP3x3L5eEWVi+Zlv1c06skv/5dlkG8qX/2b7A/Ao/CZfSwcp39UXwervV7h16ylpapA+s4tmGY=
    bucket: s3://lddui.erben.sh
    local_dir: ui/public
    skip_cleanup: true
    region: eu-central-1
    acl: public_read
    on:
      repo: jerben/linked-data-driven-ui
